<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Package [Rails Application Documentation]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;

    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }

  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }<\/style>" )

  // ]]>
  </script>

</head>
<body>


    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Package</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>


                <a href="../files/app/models/package_rb.html">

                app/models/package.rb

                </a>


        <br />

            </td>
        </tr>


        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>

                ActiveRecord::Base

            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">

  <div id="contextContent">

   </div>


    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">

        <a href="#M000118">blank_install</a>&nbsp;&nbsp;

        <a href="#M000117">blank_receipt</a>&nbsp;&nbsp;

        <a href="#M000105">build_package_association_assignment</a>&nbsp;&nbsp;

        <a href="#M000124">catalogs</a>&nbsp;&nbsp;

        <a href="#M000136">checkin</a>&nbsp;&nbsp;

        <a href="#M000137">default_attributes</a>&nbsp;&nbsp;

        <a href="#M000103">destroy</a>&nbsp;&nbsp;

        <a href="#M000104">destroy_pb_if_necessary</a>&nbsp;&nbsp;

        <a href="#M000091">display_name</a>&nbsp;&nbsp;

        <a href="#M000092">display_name=</a>&nbsp;&nbsp;

        <a href="#M000098">environments</a>&nbsp;&nbsp;

        <a href="#M000100">icon</a>&nbsp;&nbsp;

        <a href="#M000138">import</a>&nbsp;&nbsp;

        <a href="#M000121">installer_AdobeUberInstaller?</a>&nbsp;&nbsp;

        <a href="#M000120">installer_appdmg?</a>&nbsp;&nbsp;

        <a href="#M000119">installer_package?</a>&nbsp;&nbsp;

        <a href="#M000095">installs_plist</a>&nbsp;&nbsp;

        <a href="#M000096">installs_plist=</a>&nbsp;&nbsp;

        <a href="#M000131">intel?</a>&nbsp;&nbsp;

        <a href="#M000102">latest?</a>&nbsp;&nbsp;

        <a href="#M000089">name</a>&nbsp;&nbsp;

        <a href="#M000090">name=</a>&nbsp;&nbsp;

        <a href="#M000101">new_icon=</a>&nbsp;&nbsp;

        <a href="#M000132">ppc?</a>&nbsp;&nbsp;

        <a href="#M000099">public_filename</a>&nbsp;&nbsp;

        <a href="#M000128">raw_mode</a>&nbsp;&nbsp;

        <a href="#M000129">raw_mode</a>&nbsp;&nbsp;

        <a href="#M000125">raw_tags=</a>&nbsp;&nbsp;

        <a href="#M000093">receipts_plist</a>&nbsp;&nbsp;

        <a href="#M000094">receipts_plist=</a>&nbsp;&nbsp;

        <a href="#M000135">rename_installer_item</a>&nbsp;&nbsp;

        <a href="#M000107">require_ids</a>&nbsp;&nbsp;

        <a href="#M000106">requires</a>&nbsp;&nbsp;

        <a href="#M000108">requires=</a>&nbsp;&nbsp;

        <a href="#M000114">save</a>&nbsp;&nbsp;

        <a href="#M000097">save_package_branch</a>&nbsp;&nbsp;

        <a href="#M000127">serialize_for_plist</a>&nbsp;&nbsp;

        <a href="#M000116">tas_params</a>&nbsp;&nbsp;

        <a href="#M000115">tas_params</a>&nbsp;&nbsp;

        <a href="#M000130">to_plist</a>&nbsp;&nbsp;

        <a href="#M000122">to_s</a>&nbsp;&nbsp;

        <a href="#M000133">trackable?</a>&nbsp;&nbsp;

        <a href="#M000109">update_for</a>&nbsp;&nbsp;

        <a href="#M000111">update_for=</a>&nbsp;&nbsp;

        <a href="#M000110">update_for_ids</a>&nbsp;&nbsp;

        <a href="#M000134">upload</a>&nbsp;&nbsp;

        <a href="#M000112">version_tracker_web_id</a>&nbsp;&nbsp;

        <a href="#M000113">version_tracker_web_id=</a>&nbsp;&nbsp;

        <a href="#M000123">versions</a>&nbsp;&nbsp;

        <a href="#M000126">vtv</a>&nbsp;&nbsp;

      </div>
    </div>

  </div>

    <!-- if includes -->

    <div id="section">

    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">FORM_OPTIONS</td>
          <td>=</td>
          <td class="context-item-value">{:restart_actions =&gt; [['None','None'],['Logout','RequiredLogout'],['Restart','RequiredRestart'],['Shutdown','Shutdown']],                   :os_versions =&gt; [['Any',''],['10.4','10.4.0'],['10.5','10.5.0'],['10.6','10.6.0']],                   :installer_types =&gt; [['Package',''],['App DMG','appdmg'],['AdobeUberInstaller'],['AdobeAcrobatUpdater']]}</td>

        </tr>

        </table>
      </div>
    </div>




    <!-- if method_list -->

    <div id="methods">

      <h3 class="section-bar">Public Class methods</h3>


      <div id="method-M000118" class="method-detail">
        <a name="M000118"></a>

        <div class="method-heading">

          <a href="#M000118" class="method-signature">

          <span class="method-name">blank_install</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Return a blank receipt array
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000118-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000118-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 250</span>
250:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">blank_install</span>
251:     { <span class="ruby-value str">'type'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>,
252:       <span class="ruby-value str">'path'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>,
253:       <span class="ruby-value str">'CFBundleName'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>,
254:       <span class="ruby-value str">'CFBundleIdentifier'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>,
255:       <span class="ruby-value str">'CFBundleShortVersionString'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>,
256:       <span class="ruby-value str">'md5checksum'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>}
257:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000117" class="method-detail">
        <a name="M000117"></a>

        <div class="method-heading">

          <a href="#M000117" class="method-signature">

          <span class="method-name">blank_receipt</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Return a blank receipt array
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000117-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000117-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 241</span>
241:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">blank_receipt</span>
242:     { <span class="ruby-value str">'name'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>,
243:       <span class="ruby-value str">'filename'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>,
244:       <span class="ruby-value str">'packageid'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>,
245:       <span class="ruby-value str">'installed_size'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>,
246:       <span class="ruby-value str">'version'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>}
247:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000136" class="method-detail">
        <a name="M000136"></a>

        <div class="method-heading">

          <a href="#M000136" class="method-signature">

          <span class="method-name">checkin</span><span class="method-args">(path, options = {})</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Creates valid and populated Pkgsinfo object Pass path to package. Returns a
helpful hash
</p>
<h1>> :package - An new, unsaved package instance</h1>
<h1>> :plist_string - The string split out by MAKEPKGINFO</h1>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000136-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000136-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 443</span>
443:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">checkin</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span> = {})
444:     <span class="ruby-comment cmt"># Format options into command line options</span>
445:     <span class="ruby-identifier">cmd_line_options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> 
446:       <span class="ruby-comment cmt"># Escape for spaces</span>
447:       <span class="ruby-identifier">v</span> = <span class="ruby-identifier">v</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/ /</span>,<span class="ruby-value str">'\ '</span>)
448:       <span class="ruby-node">&quot;--#{k}=#{v}&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">blank?</span>
449:     <span class="ruby-keyword kw">end</span>
450:     <span class="ruby-identifier">cmd_line_options</span> = <span class="ruby-identifier">cmd_line_options</span>.<span class="ruby-identifier">compact</span>
451:     <span class="ruby-comment cmt"># Rename package on disk to match proper style</span>
452:     <span class="ruby-identifier">path</span> = <span class="ruby-constant">Package</span>.<span class="ruby-identifier">rename_installer_item</span>(<span class="ruby-identifier">path</span>)
453:     <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span> <span class="ruby-node">&quot;Checking in #{path}...&quot;</span>
454:     <span class="ruby-identifier">tmp_file_path</span> = <span class="ruby-node">&quot;/tmp/mor-#{rand(1000)}.plist&quot;</span>
455:     <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span> <span class="ruby-node">`#{Munki::Application::MAKEPKGINFO} #{cmd_line_options.join(&quot; &quot;)} &quot;#{path}&quot; &gt; &quot;#{tmp_file_path}&quot;`</span>
456:     <span class="ruby-identifier">exit_status</span> = <span class="ruby-value">`echo $?`</span>.<span class="ruby-identifier">chomp</span>
457:     
458:     <span class="ruby-identifier">package</span> = <span class="ruby-keyword kw">nil</span>
459:     <span class="ruby-comment cmt"># If makepkgsinfo exited with zero and outputted a valid pkgsinfo plist file, continue.</span>
460:     <span class="ruby-comment cmt"># TO-DO add a plist validator to this if</span>
461:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">exit_status</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
462:       <span class="ruby-identifier">package</span> = <span class="ruby-constant">Package</span>.<span class="ruby-identifier">import</span>(<span class="ruby-identifier">tmp_file_path</span>)
463:       <span class="ruby-comment cmt"># Assign the starting environment</span>
464:       <span class="ruby-identifier">package</span>.<span class="ruby-identifier">environment</span> = <span class="ruby-constant">Environment</span>.<span class="ruby-identifier">start</span>
465:       
466:       <span class="ruby-comment cmt"># Set defaults based on previous records with the same name</span>
467:       <span class="ruby-identifier">existing_version</span> = <span class="ruby-constant">Package</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">:package_branch_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">package</span>.<span class="ruby-identifier">package_branch_id</span>).<span class="ruby-identifier">order</span>(<span class="ruby-value str">'version DESC'</span>).<span class="ruby-identifier">first</span>
468:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">existing_version</span>.<span class="ruby-identifier">nil?</span>
469:         <span class="ruby-identifier">package</span>.<span class="ruby-identifier">description</span> = <span class="ruby-identifier">existing_version</span>.<span class="ruby-identifier">description</span>
470:         <span class="ruby-identifier">package</span>.<span class="ruby-identifier">icon</span> = <span class="ruby-identifier">existing_version</span>.<span class="ruby-identifier">icon</span>
471:         <span class="ruby-identifier">package</span>.<span class="ruby-identifier">package_category_id</span> = <span class="ruby-identifier">existing_version</span>.<span class="ruby-identifier">package_category_id</span>
472:         <span class="ruby-identifier">package</span>.<span class="ruby-identifier">installs</span> = <span class="ruby-identifier">existing_version</span>.<span class="ruby-identifier">installs</span>
473:       <span class="ruby-keyword kw">end</span>
474: 
475:       <span class="ruby-comment cmt"># Determine installer_choices</span>
476:       <span class="ruby-comment cmt"># TO-DO fix the installer_choices</span>
477:       <span class="ruby-comment cmt"># pkgsinfo.installer_choices_xml = pkgsinfo.derive_installer_choices</span>
478:     <span class="ruby-keyword kw">else</span>
479:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Checking in #{File.basename(pkg_path)} failed!&quot;</span>
480:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;Here's the output of makepkgsinfo:\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">tmp_file_path</span>)
481:     <span class="ruby-keyword kw">end</span>
482:     
483:     <span class="ruby-comment cmt"># Build hash</span>
484:     <span class="ruby-identifier">hash</span> = {<span class="ruby-identifier">:package</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">package</span>, <span class="ruby-identifier">:plist_string</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">tmp_file_path</span>)}
485:     <span class="ruby-comment cmt"># Remove tmp file</span>
486:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span>(<span class="ruby-identifier">tmp_file_path</span>)
487:     <span class="ruby-comment cmt"># Return hash</span>
488:     <span class="ruby-identifier">hash</span>
489:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000137" class="method-detail">
        <a name="M000137"></a>

        <div class="method-heading">

          <a href="#M000137" class="method-signature">

          <span class="method-name">default_attributes</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns a hash of default attributes that are used to intialize a new
package object. Used in self.import.
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000137-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000137-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 493</span>
493:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">default_attributes</span>
494:     {<span class="ruby-identifier">:supported_architectures</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'i386'</span>,<span class="ruby-value str">'ppc'</span>]}
495:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000138" class="method-detail">
        <a name="M000138"></a>

        <div class="method-heading">

          <a href="#M000138" class="method-signature">

          <span class="method-name">import</span><span class="method-args">(plist_file)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Creates Pkgsinfo model object from valid plist Typically, this method is
passed the output file created from makepkgsinfo (upon upload or check-in)
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000138-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000138-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 499</span>
499:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">import</span>(<span class="ruby-identifier">plist_file</span>)
500:     <span class="ruby-identifier">p</span> = <span class="ruby-constant">Package</span>.<span class="ruby-identifier">new</span>
501:     <span class="ruby-identifier">h</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">plist_file</span>).<span class="ruby-identifier">from_plist</span>
502:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>.<span class="ruby-identifier">nil?</span>
503:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidPackageUpload</span>
504:     <span class="ruby-keyword kw">else</span>
505:       <span class="ruby-comment cmt"># Remove items that we don't need</span>
506:       <span class="ruby-identifier">h</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'catalogs'</span>)
507:       <span class="ruby-comment cmt"># Apply default values</span>
508:       <span class="ruby-identifier">p</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-constant">Package</span>.<span class="ruby-identifier">default_attributes</span>
509:       <span class="ruby-comment cmt"># Find or create a package branch for this</span>
510:       <span class="ruby-identifier">p</span>.<span class="ruby-identifier">name</span> = <span class="ruby-identifier">h</span>[<span class="ruby-value str">'name'</span>]
511:       <span class="ruby-identifier">h</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'name'</span>)
512:       <span class="ruby-comment cmt"># This will barf if a key exists in h that isn't an attribute of this model</span>
513:       <span class="ruby-identifier">p</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">h</span>
514:       <span class="ruby-comment cmt"># Assign a package category</span>
515:       <span class="ruby-identifier">p</span>.<span class="ruby-identifier">package_category_id</span> = <span class="ruby-constant">PackageCategory</span>.<span class="ruby-identifier">default</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">installer_type</span>).<span class="ruby-identifier">id</span>
516:       <span class="ruby-identifier">p</span>
517:     <span class="ruby-keyword kw">end</span>
518:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000129" class="method-detail">
        <a name="M000129"></a>

        <div class="method-heading">

          <a href="#M000129" class="method-signature">

          <span class="method-name">raw_mode</span><span class="method-args">(int)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Store <a href="Package.html#M000128">raw_mode</a> ID map
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000129-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000129-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 357</span>
357:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">raw_mode</span>(<span class="ruby-identifier">int</span>)
358:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">int</span>
359:       <span class="ruby-keyword kw">when</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value str">&quot;None&quot;</span>
360:       <span class="ruby-keyword kw">when</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value str">&quot;Append&quot;</span>
361:       <span class="ruby-keyword kw">when</span> <span class="ruby-value">2</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value str">&quot;Exclusive&quot;</span>
362:     <span class="ruby-keyword kw">end</span>
363:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000135" class="method-detail">
        <a name="M000135"></a>

        <div class="method-heading">

          <a href="#M000135" class="method-signature">

          <span class="method-name">rename_installer_item</span><span class="method-args">(path)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Renames item at path with escaped installer item name Pass an absolute path
for best results
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000135-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000135-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 422</span>
422:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">rename_installer_item</span>(<span class="ruby-identifier">path</span>)
423:     <span class="ruby-identifier">dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">path</span>)
424:     <span class="ruby-identifier">name</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">path</span>)
425:     <span class="ruby-comment cmt"># Escape it</span>
426:     <span class="ruby-identifier">new_name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">' '</span>,<span class="ruby-value str">'_'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/['&quot;\(\)]/</span>,<span class="ruby-value str">''</span>)
427:     <span class="ruby-identifier">new_path</span> = <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{dir}/#{new_name}&quot;</span>)
428: 
429:     <span class="ruby-comment cmt"># Move it if it is any different</span>
430:     <span class="ruby-comment cmt"># Return new path if it works, old path if it doesn't work</span>
431:     <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">move</span>(<span class="ruby-identifier">path</span>,<span class="ruby-identifier">new_path</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">new_path</span>
432:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">new_path</span>)
433:       <span class="ruby-identifier">new_path</span>
434:     <span class="ruby-keyword kw">else</span>
435:       <span class="ruby-identifier">path</span>
436:     <span class="ruby-keyword kw">end</span>
437:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000116" class="method-detail">
        <a name="M000116"></a>

        <div class="method-heading">

          <a href="#M000116" class="method-signature">

          <span class="method-name">tas_params</span><span class="method-args">(model_obj)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Default parameters for a tabled_asm_select method Takes an object of the
current class and returns params
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000116-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000116-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 214</span>
214:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">tas_params</span>(<span class="ruby-identifier">model_obj</span>)
215:     <span class="ruby-comment cmt"># Get all the package branches associated with this unit and environment</span>
216:     <span class="ruby-identifier">update_for_options</span> = <span class="ruby-constant">PackageBranch</span>.<span class="ruby-identifier">unit_member</span>(<span class="ruby-identifier">model_obj</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">e</span>,<span class="ruby-identifier">e</span>] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">model_obj</span>.<span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">id</span> }.<span class="ruby-identifier">compact</span>
217:     <span class="ruby-identifier">update_for_selected</span> = <span class="ruby-identifier">model_obj</span>.<span class="ruby-identifier">update_for_items</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package_branches</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)
218:     <span class="ruby-identifier">requires_options</span> = <span class="ruby-constant">Package</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">:unit_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_obj</span>.<span class="ruby-identifier">unit_id</span>).<span class="ruby-identifier">where</span>(<span class="ruby-node">&quot;id != #{model_obj.id}&quot;</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">e</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">:version</span>),<span class="ruby-identifier">e</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">:version</span>)] }
219:     <span class="ruby-identifier">requires_selected</span> = <span class="ruby-identifier">model_obj</span>.<span class="ruby-identifier">require_items</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package</span>).<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">:version</span>) }
220:     
221:     <span class="ruby-identifier">model_name</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">underscore</span>
222: 
223:     <span class="ruby-comment cmt"># Array for table_asm_select</span>
224:     [{<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Update for&quot;</span>,
225:       <span class="ruby-identifier">:model_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_name</span>,
226:       <span class="ruby-identifier">:attribute_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;update_for&quot;</span>,
227:       <span class="ruby-identifier">:select_title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Select a package&quot;</span>,
228:       <span class="ruby-identifier">:options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">update_for_options</span>,
229:       <span class="ruby-identifier">:selected_options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_obj</span>.<span class="ruby-identifier">update_for_ids</span>,
230:       <span class="ruby-identifier">:helpful_string</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Select a package branch that this package updates&quot;</span>},
231:      {<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Requires&quot;</span>,
232:       <span class="ruby-identifier">:model_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_name</span>,
233:       <span class="ruby-identifier">:attribute_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;requires&quot;</span>,
234:       <span class="ruby-identifier">:select_title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Select a package&quot;</span>,
235:       <span class="ruby-identifier">:options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">requires_options</span>,
236:       <span class="ruby-identifier">:selected_options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">requires_selected</span>,
237:       <span class="ruby-identifier">:helpful_string</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Select a specific package that this package needs installed&quot;</span>},]
238:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000134" class="method-detail">
        <a name="M000134"></a>

        <div class="method-heading">

          <a href="#M000134" class="method-signature">

          <span class="method-name">upload</span><span class="method-args">(file, options = {})</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Takes a tmp file, moves it to the appropriate place, and checks it in
Return value is the same as <a
href="Package.html#M000136">Package.checkin</a>. If it fails, it will raise
an InvalidPackageUpload exception
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000134-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000134-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 392</span>
392:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">upload</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">options</span> = {})
393:     <span class="ruby-identifier">original_filename</span> = <span class="ruby-keyword kw">nil</span>
394:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:original_filename</span>)
395:       <span class="ruby-identifier">original_filename</span> = <span class="ruby-identifier">file</span>.<span class="ruby-identifier">original_filename</span>
396:     <span class="ruby-keyword kw">else</span>
397:       <span class="ruby-identifier">original_filename</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">file</span>.<span class="ruby-identifier">path</span>)
398:     <span class="ruby-keyword kw">end</span>
399:     <span class="ruby-comment cmt"># Add timestamp to original filename</span>
400:     <span class="ruby-identifier">installer_item_name</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">:ordered_numeric</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;_&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">original_filename</span>
401:     <span class="ruby-comment cmt"># Create absolute path</span>
402:     <span class="ruby-identifier">dest_path</span> = <span class="ruby-constant">Munki</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span><span class="ruby-operator">::</span><span class="ruby-constant">PACKAGE_DIR</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">installer_item_name</span>
403:     <span class="ruby-comment cmt"># Make sure a file of that name doesn't already exist and fix it if it does</span>
404:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">dest_path</span>)
405:       <span class="ruby-identifier">installer_item_name</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">&quot;%Y.%m.%d.%H%M%S&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;_&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">1001</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;_&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">original_filename</span>
406:       <span class="ruby-identifier">dest_path</span> = <span class="ruby-constant">Munki</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span><span class="ruby-operator">::</span><span class="ruby-constant">PACKAGE_DIR</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">installer_item_name</span>
407:     <span class="ruby-keyword kw">end</span>
408:     <span class="ruby-comment cmt"># Move from the tmp location to destination</span>
409:     <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">move</span>(<span class="ruby-identifier">file</span>.<span class="ruby-identifier">path</span>,<span class="ruby-identifier">dest_path</span>)
410:     <span class="ruby-identifier">dest_path</span> = <span class="ruby-constant">Package</span>.<span class="ruby-identifier">rename_installer_item</span>(<span class="ruby-identifier">dest_path</span>)
411:     <span class="ruby-comment cmt"># Check package in</span>
412:     <span class="ruby-keyword kw">begin</span>
413:       <span class="ruby-constant">Package</span>.<span class="ruby-identifier">checkin</span>(<span class="ruby-identifier">dest_path</span>, <span class="ruby-identifier">options</span>)
414:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">InvalidPackageUpload</span>
415:       <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">remove</span>(<span class="ruby-identifier">dest_path</span>)
416:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidPackageUpload</span>(<span class="ruby-node">&quot;There was a problem checking in #{dest_path}. It has been deleted.&quot;</span>)
417:     <span class="ruby-keyword kw">end</span>
418:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <h3 class="section-bar">Public Instance methods</h3>


      <div id="method-M000105" class="method-detail">
        <a name="M000105"></a>

        <div class="method-heading">

          <a href="#M000105" class="method-signature">

          <span class="method-name">build_package_association_assignment</span><span class="method-args">(assoc,list)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Assign the list of items to a specific association (assoc) Copied from
manifest magic mixin model.
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000105-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000105-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 143</span>
143:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_package_association_assignment</span>(<span class="ruby-identifier">assoc</span>,<span class="ruby-identifier">list</span>)
144:     <span class="ruby-comment cmt"># Blank out the association</span>
145:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{assoc}=&quot;</span>,[])
146:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">nil?</span>
147:       <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
148:         <span class="ruby-comment cmt"># Create association for...</span>
149:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Package</span>
150:           <span class="ruby-comment cmt"># ...a specific package</span>
151:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{assoc}&quot;</span>).<span class="ruby-identifier">build</span>({<span class="ruby-identifier">:package_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:package_branch_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">id</span>})
152:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">PackageBranch</span>
153:           <span class="ruby-comment cmt"># ...the latest package from a package branch</span>
154:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{assoc}&quot;</span>).<span class="ruby-identifier">build</span>({<span class="ruby-identifier">:package_branch_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">id</span>})
155:         <span class="ruby-keyword kw">end</span>
156:       <span class="ruby-keyword kw">end</span>
157:     <span class="ruby-keyword kw">end</span>
158:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000124" class="method-detail">
        <a name="M000124"></a>

        <div class="method-heading">

          <a href="#M000124" class="method-signature">

          <span class="method-name">catalogs</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Determines what catalog this belongs to
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000124-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000124-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 297</span>
297:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">catalogs</span>
298:     [<span class="ruby-node">&quot;#{unit.id}_#{environment}.plist&quot;</span>]
299:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000103" class="method-detail">
        <a name="M000103"></a>

        <div class="method-heading">

          <a href="#M000103" class="method-signature">

          <span class="method-name">destroy</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Extend destroy method
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000103-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000103-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 124</span>
124:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy</span>
125:     <span class="ruby-identifier">destroy_pb_if_necessary</span>
126:     <span class="ruby-keyword kw">super</span>
127:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000104" class="method-detail">
        <a name="M000104"></a>

        <div class="method-heading">

          <a href="#M000104" class="method-signature">

          <span class="method-name">destroy_pb_if_necessary</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Destroy associated package_branch if the package_branch only references the
current package.
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000104-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000104-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 131</span>
131:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy_pb_if_necessary</span>
132:     <span class="ruby-identifier">pb</span> = <span class="ruby-identifier">package_branch</span>
133:     <span class="ruby-identifier">p</span> = <span class="ruby-identifier">pb</span>.<span class="ruby-identifier">packages</span>.<span class="ruby-identifier">first</span>
134:     <span class="ruby-comment cmt"># If there is only one package in the package branch and it is</span>
135:     <span class="ruby-comment cmt"># this one, destroy the package branch</span>
136:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pb</span>.<span class="ruby-identifier">packages</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">pb</span>.<span class="ruby-identifier">packages</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>
137:       <span class="ruby-identifier">pb</span>.<span class="ruby-identifier">destroy</span>
138:     <span class="ruby-keyword kw">end</span>
139:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000091" class="method-detail">
        <a name="M000091"></a>

        <div class="method-heading">

          <a href="#M000091" class="method-signature">

          <span class="method-name">display_name</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Virtual attribute for accessing the associated package branch display name
which this package belongs to
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000091-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000091-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/package.rb, line 41</span>
41:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">display_name</span>
42:     <span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">display_name</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">nil?</span>
43:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000092" class="method-detail">
        <a name="M000092"></a>

        <div class="method-heading">

          <a href="#M000092" class="method-signature">

          <span class="method-name">display_name=</span><span class="method-args">(value)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Virtual attribute setter
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000092-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000092-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/package.rb, line 46</span>
46:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">display_name=</span>(<span class="ruby-identifier">value</span>)
47:     <span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">display_name</span> = <span class="ruby-identifier">value</span>
48:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000098" class="method-detail">
        <a name="M000098"></a>

        <div class="method-heading">

          <a href="#M000098" class="method-signature">

          <span class="method-name">environments</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000098-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000098-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/package.rb, line 87</span>
87:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">environments</span>
88:     [<span class="ruby-identifier">environment</span>]
89:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000100" class="method-detail">
        <a name="M000100"></a>

        <div class="method-heading">

          <a href="#M000100" class="method-signature">

          <span class="method-name">icon</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
If there is no associated icon, then it asks for the package categories
icon instead
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000100-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000100-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 97</span>
 97:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">icon</span>
 98:     <span class="ruby-keyword kw">begin</span>
 99:       <span class="ruby-identifier">i</span> = <span class="ruby-constant">Icon</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">icon_id</span>)
100:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>
101:       <span class="ruby-identifier">i</span> = <span class="ruby-identifier">package_category</span>.<span class="ruby-identifier">icon</span>
102:     <span class="ruby-keyword kw">end</span>
103:     <span class="ruby-identifier">i</span>
104:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000121" class="method-detail">
        <a name="M000121"></a>

        <div class="method-heading">

          <a href="#M000121" class="method-signature">

          <span class="method-name">installer_AdobeUberInstaller?</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns true if installer type is AdobeUberInstaller
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000121-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000121-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 270</span>
270:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">installer_AdobeUberInstaller?</span>
271:     <span class="ruby-identifier">installer_type</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;AdobeUberInstaller&quot;</span>
272:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000120" class="method-detail">
        <a name="M000120"></a>

        <div class="method-heading">

          <a href="#M000120" class="method-signature">

          <span class="method-name">installer_appdmg?</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns true if installer type is appdmg
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000120-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000120-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 265</span>
265:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">installer_appdmg?</span>
266:     <span class="ruby-identifier">installer_type</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;appdmg&quot;</span>
267:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000119" class="method-detail">
        <a name="M000119"></a>

        <div class="method-heading">

          <a href="#M000119" class="method-signature">

          <span class="method-name">installer_package?</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns true if installer type is a .pkg/.mpkg (in other words, blank)
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000119-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000119-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 260</span>
260:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">installer_package?</span>
261:     <span class="ruby-identifier">installer_type</span>.<span class="ruby-identifier">blank?</span>
262:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000095" class="method-detail">
        <a name="M000095"></a>

        <div class="method-heading">

          <a href="#M000095" class="method-signature">

          <span class="method-name">installs_plist</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Virtual attribute getter Converts the installs array into a plist
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000095-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000095-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/package.rb, line 68</span>
68:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">installs_plist</span>
69:     <span class="ruby-keyword kw">begin</span>
70:       <span class="ruby-identifier">installs</span>.<span class="ruby-identifier">to_plist</span>
71:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NoMethodError</span>
72:     <span class="ruby-keyword kw">end</span>
73:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000096" class="method-detail">
        <a name="M000096"></a>

        <div class="method-heading">

          <a href="#M000096" class="method-signature">

          <span class="method-name">installs_plist=</span><span class="method-args">(value)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Virtual attribute setter Takes a plist string and converts it to a ruby
object and assigns it to receipts
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000096-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000096-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/package.rb, line 77</span>
77:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">installs_plist=</span>(<span class="ruby-identifier">value</span>)
78:     <span class="ruby-identifier">obj</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">from_plist</span>
79:     <span class="ruby-identifier">installs</span> = <span class="ruby-identifier">obj</span>
80:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000131" class="method-detail">
        <a name="M000131"></a>

        <div class="method-heading">

          <a href="#M000131" class="method-signature">

          <span class="method-name">intel?</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
True if this package supportes intel computers
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000131-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000131-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 371</span>
371:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">intel?</span>
372:     <span class="ruby-identifier">supported_architectures</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;i386&quot;</span>)
373:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000102" class="method-detail">
        <a name="M000102"></a>

        <div class="method-heading">

          <a href="#M000102" class="method-signature">

          <span class="method-name">latest?</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Checks if the current package is the latest (newest) package in the package
branch
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000102-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000102-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 119</span>
119:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">latest?</span>
120:     <span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">latest</span>(<span class="ruby-keyword kw">self</span>).<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">id</span>
121:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000089" class="method-detail">
        <a name="M000089"></a>

        <div class="method-heading">

          <a href="#M000089" class="method-signature">

          <span class="method-name">name</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Virtual attribute for accessing the associated package branch name which
this package belongs to
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000089-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000089-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/package.rb, line 26</span>
26:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">name</span>
27:     <span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">name</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">nil?</span>
28:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000090" class="method-detail">
        <a name="M000090"></a>

        <div class="method-heading">

          <a href="#M000090" class="method-signature">

          <span class="method-name">name=</span><span class="method-args">(value)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Virtual setter for name attribute Assigns an existing <a
href="PackageBranch.html">PackageBranch</a> if one exists matching value,
otherwise, a new one is created.
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000090-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000090-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/package.rb, line 32</span>
32:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">name=</span>(<span class="ruby-identifier">value</span>)
33:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>
34:       <span class="ruby-comment cmt"># If the value is new, find or create the package branch and assign it</span>
35:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">package_branch</span> = <span class="ruby-constant">PackageBranch</span>.<span class="ruby-identifier">find_or_create_by_name</span>(<span class="ruby-identifier">value</span>)
36:     <span class="ruby-keyword kw">end</span>
37:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000101" class="method-detail">
        <a name="M000101"></a>

        <div class="method-heading">

          <a href="#M000101" class="method-signature">

          <span class="method-name">new_icon=</span><span class="method-args">(value)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Setter for new_icon virtual attribute Creates a new icon object and assigns
to self.icon
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000101-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000101-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 108</span>
108:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new_icon=</span>(<span class="ruby-identifier">value</span>)
109:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">blank?</span>
110:       <span class="ruby-identifier">i</span> = <span class="ruby-constant">Icon</span>.<span class="ruby-identifier">new</span>({<span class="ruby-identifier">:uploaded_data</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>})
111:       <span class="ruby-comment cmt"># If icon is saved, assign it to the record</span>
112:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">icon</span> = <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">save</span>
113:     <span class="ruby-keyword kw">end</span>
114:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000132" class="method-detail">
        <a name="M000132"></a>

        <div class="method-heading">

          <a href="#M000132" class="method-signature">

          <span class="method-name">ppc?</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
True if this package supportes PPC computers
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000132-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000132-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 376</span>
376:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ppc?</span>
377:     <span class="ruby-identifier">supported_architectures</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;ppc&quot;</span>)
378:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000099" class="method-detail">
        <a name="M000099"></a>

        <div class="method-heading">

          <a href="#M000099" class="method-signature">

          <span class="method-name">public_filename</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns a URL path to the package download
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000099-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000099-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/package.rb, line 92</span>
92:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">public_filename</span>
93:     <span class="ruby-node">&quot;/packages/#{environment_id}/#{unit_id}/#{installer_item_location}&quot;</span>
94:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000128" class="method-detail">
        <a name="M000128"></a>

        <div class="method-heading">

          <a href="#M000128" class="method-signature">

          <span class="method-name">raw_mode</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000128-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000128-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 352</span>
352:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">raw_mode</span>
353:     <span class="ruby-constant">Package</span>.<span class="ruby-identifier">raw_mode</span>(<span class="ruby-identifier">raw_mode_id</span>)
354:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000125" class="method-detail">
        <a name="M000125"></a>

        <div class="method-heading">

          <a href="#M000125" class="method-signature">

          <span class="method-name">raw_tags=</span><span class="method-args">(value)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Setter for the raw_tags attribute Converts the plist string value to a ruby
object and assigns it to the attribute Takes a raw plist string
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000125-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000125-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 306</span>
306:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">raw_tags=</span>(<span class="ruby-identifier">value</span>)
307:     <span class="ruby-keyword kw">begin</span>
308:       <span class="ruby-identifier">obj</span> = <span class="ruby-constant">Plist</span>.<span class="ruby-identifier">parse_xml</span>(<span class="ruby-identifier">value</span>)
309:       <span class="ruby-identifier">yaml</span> = <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">to_yaml</span>
310:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">TypeError</span>
311:       <span class="ruby-identifier">yaml</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_yaml</span>
312:     <span class="ruby-keyword kw">end</span>
313:     <span class="ruby-identifier">write_attribute</span>(<span class="ruby-identifier">:raw_tags</span>,<span class="ruby-identifier">yaml</span>)
314:     <span class="ruby-identifier">yaml</span>
315:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000093" class="method-detail">
        <a name="M000093"></a>

        <div class="method-heading">

          <a href="#M000093" class="method-signature">

          <span class="method-name">receipts_plist</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Virtual attribute getter Converts the receipts array into a plist
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000093-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000093-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/package.rb, line 52</span>
52:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">receipts_plist</span>
53:     <span class="ruby-keyword kw">begin</span>
54:       <span class="ruby-identifier">receipts</span>.<span class="ruby-identifier">to_plist</span>
55:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NoMethodError</span>
56:     <span class="ruby-keyword kw">end</span>
57:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000094" class="method-detail">
        <a name="M000094"></a>

        <div class="method-heading">

          <a href="#M000094" class="method-signature">

          <span class="method-name">receipts_plist=</span><span class="method-args">(value)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Virtual attribute setter Takes a plist string and converts it to a ruby
object and assigns it to receipts
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000094-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000094-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/package.rb, line 61</span>
61:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">receipts_plist=</span>(<span class="ruby-identifier">value</span>)
62:     <span class="ruby-identifier">obj</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">from_plist</span>
63:     <span class="ruby-identifier">receipts</span> = <span class="ruby-identifier">obj</span>
64:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000107" class="method-detail">
        <a name="M000107"></a>

        <div class="method-heading">

          <a href="#M000107" class="method-signature">

          <span class="method-name">require_ids</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000107-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000107-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 165</span>
165:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">require_ids</span>
166:     <span class="ruby-identifier">requires</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
167:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000106" class="method-detail">
        <a name="M000106"></a>

        <div class="method-heading">

          <a href="#M000106" class="method-signature">

          <span class="method-name">requires</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Virtual attributes that aggregates the require_items
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000106-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000106-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 161</span>
161:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">requires</span>
162:     <span class="ruby-identifier">require_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package</span>)
163:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000108" class="method-detail">
        <a name="M000108"></a>

        <div class="method-heading">

          <a href="#M000108" class="method-signature">

          <span class="method-name">requires=</span><span class="method-args">(list)</span>

          </a>

        </div>

        <div class="method-description">

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000108-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000108-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 169</span>
169:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">requires=</span>(<span class="ruby-identifier">list</span>)
170:     <span class="ruby-identifier">build_package_association_assignment</span>(<span class="ruby-identifier">:require_items</span>,<span class="ruby-identifier">list</span>)
171:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000114" class="method-detail">
        <a name="M000114"></a>

        <div class="method-heading">

          <a href="#M000114" class="method-signature">

          <span class="method-name">save</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Extend save
</p>
<h1>> Ensure we have at least a generic icon!</h1>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000114-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000114-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 199</span>
199:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save</span>
200:     <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">icon</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
201:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">icon</span> = <span class="ruby-constant">Icon</span>.<span class="ruby-identifier">generic</span>
202:     <span class="ruby-keyword kw">end</span>
203:     <span class="ruby-keyword kw">super</span>
204:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000097" class="method-detail">
        <a name="M000097"></a>

        <div class="method-heading">

          <a href="#M000097" class="method-signature">

          <span class="method-name">save_package_branch</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Attempts to save the package branch and returns the result
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000097-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000097-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/package.rb, line 83</span>
83:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save_package_branch</span>
84:     <span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">save</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">changed?</span>
85:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000127" class="method-detail">
        <a name="M000127"></a>

        <div class="method-heading">

          <a href="#M000127" class="method-signature">

          <span class="method-name">serialize_for_plist</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Create a hash intended for plist output Won&#8217;t include the entire
object attributes but only the ones relevant for munki clients
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000127-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000127-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 333</span>
333:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">serialize_for_plist</span>
334:     <span class="ruby-identifier">h</span> = {}
335:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">raw_mode</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;Exclusive&quot;</span>
336:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">raw_tags</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">raw_tags</span>.<span class="ruby-identifier">blank?</span>
337:     <span class="ruby-keyword kw">else</span>
338:       <span class="ruby-comment cmt"># Take care of the straight forward mappings</span>
339:       [<span class="ruby-identifier">:name</span>,<span class="ruby-identifier">:display_name</span>,<span class="ruby-identifier">:receipts</span>,<span class="ruby-identifier">:description</span>,<span class="ruby-identifier">:minimum_os_version</span>,<span class="ruby-identifier">:maximum_os_version</span>,
340:        <span class="ruby-identifier">:installs</span>,<span class="ruby-identifier">:RestartAction</span>,<span class="ruby-identifier">:package_path</span>,<span class="ruby-identifier">:autoremove</span>,<span class="ruby-identifier">:installer_type</span>,<span class="ruby-identifier">:installed_size</span>,<span class="ruby-identifier">:installer_item_size</span>,
341:        <span class="ruby-identifier">:installer_item_location</span>,<span class="ruby-identifier">:uninstall_method</span>,<span class="ruby-identifier">:uninstaller_item_location</span>,<span class="ruby-identifier">:uninstaller_item_size</span>,<span class="ruby-identifier">:uninstallable</span>,
342:        <span class="ruby-identifier">:requires</span>,<span class="ruby-identifier">:update_for</span>,<span class="ruby-identifier">:catalogs</span>,<span class="ruby-identifier">:supported_architectures</span>,<span class="ruby-identifier">:version</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
343:         <span class="ruby-identifier">h</span>[<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">key</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">key</span>).<span class="ruby-identifier">blank?</span>
344:       <span class="ruby-keyword kw">end</span>
345:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">raw_mode</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;Append&quot;</span>
346:         <span class="ruby-identifier">h</span> = <span class="ruby-identifier">h</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">raw_tags</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">raw_tags</span>.<span class="ruby-identifier">blank?</span>
347:       <span class="ruby-keyword kw">end</span>
348:     <span class="ruby-keyword kw">end</span>
349:     <span class="ruby-identifier">h</span>
350:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000115" class="method-detail">
        <a name="M000115"></a>

        <div class="method-heading">

          <a href="#M000115" class="method-signature">

          <span class="method-name">tas_params</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Default parameters for the table_asm_select method Returns values for self
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000115-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000115-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 208</span>
208:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tas_params</span>
209:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">tas_params</span>(<span class="ruby-keyword kw">self</span>)
210:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000130" class="method-detail">
        <a name="M000130"></a>

        <div class="method-heading">

          <a href="#M000130" class="method-signature">

          <span class="method-name">to_plist</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Converts serialized object into plist string
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000130-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000130-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 366</span>
366:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_plist</span>
367:     <span class="ruby-identifier">serialize_for_plist</span>.<span class="ruby-identifier">to_plist</span>
368:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000122" class="method-detail">
        <a name="M000122"></a>

        <div class="method-heading">

          <a href="#M000122" class="method-signature">

          <span class="method-name">to_s</span><span class="method-args">(style = nil)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Overrides default to string method. Specifies version if this package
isn&#8217;t the latest of the current units
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000122-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000122-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 276</span>
276:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">style</span> = <span class="ruby-keyword kw">nil</span>)    
277:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">style</span>
278:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:unique</span> <span class="ruby-keyword kw">then</span>
279:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">latest?</span>
280:         <span class="ruby-node">&quot;#{id}_#{name}&quot;</span>
281:       <span class="ruby-keyword kw">else</span>
282:         <span class="ruby-node">&quot;#{id}_#{name}-#{version}&quot;</span>
283:       <span class="ruby-keyword kw">end</span>
284:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:version</span> <span class="ruby-keyword kw">then</span> <span class="ruby-node">&quot;#{name}-#{version}&quot;</span>
285:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:pretty</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">display_name</span>
286:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:pretty_with_version</span> <span class="ruby-keyword kw">then</span> <span class="ruby-node">&quot;#{self.to_s(:pretty)} (#{version})&quot;</span>
287:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:plist_path</span> <span class="ruby-keyword kw">then</span> <span class="ruby-node">&quot;pkginfo/#{self.to_s(:unique)}.plist&quot;</span>
288:     <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">name</span>
289:     <span class="ruby-keyword kw">end</span>
290:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000133" class="method-detail">
        <a name="M000133"></a>

        <div class="method-heading">

          <a href="#M000133" class="method-signature">

          <span class="method-name">trackable?</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
If the package branch&#8217;s version tracker &#8220;looks_good&#8220;,
returns true
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000133-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000133-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 381</span>
381:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">trackable?</span>
382:     <span class="ruby-keyword kw">begin</span>
383:       <span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">version_tracker</span>.<span class="ruby-identifier">looks_good?</span>
384:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NoMethodError</span>
385:       <span class="ruby-keyword kw">false</span>
386:     <span class="ruby-keyword kw">end</span>
387:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000109" class="method-detail">
        <a name="M000109"></a>

        <div class="method-heading">

          <a href="#M000109" class="method-signature">

          <span class="method-name">update_for</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Virtual attributes that aggregates the update_for_items
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000109-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000109-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 174</span>
174:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_for</span>
175:     <span class="ruby-identifier">update_for_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package</span>)
176:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000111" class="method-detail">
        <a name="M000111"></a>

        <div class="method-heading">

          <a href="#M000111" class="method-signature">

          <span class="method-name">update_for=</span><span class="method-args">(list)</span>

          </a>

        </div>

        <div class="method-description">

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000111-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000111-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 183</span>
183:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_for=</span>(<span class="ruby-identifier">list</span>)
184:     <span class="ruby-identifier">build_package_association_assignment</span>(<span class="ruby-identifier">:update_for_items</span>,<span class="ruby-identifier">list</span>)
185:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000110" class="method-detail">
        <a name="M000110"></a>

        <div class="method-heading">

          <a href="#M000110" class="method-signature">

          <span class="method-name">update_for_ids</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Getter that aggregates the <a href="Package.html#M000109">update_for</a>
ids
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000110-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000110-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 179</span>
179:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_for_ids</span>
180:     <span class="ruby-identifier">update_for</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
181:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000112" class="method-detail">
        <a name="M000112"></a>

        <div class="method-heading">

          <a href="#M000112" class="method-signature">

          <span class="method-name">version_tracker_web_id</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Getter for virtual attribute
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000112-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000112-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 188</span>
188:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">version_tracker_web_id</span>
189:     <span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">version_tracker_web_id</span>
190:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000113" class="method-detail">
        <a name="M000113"></a>

        <div class="method-heading">

          <a href="#M000113" class="method-signature">

          <span class="method-name">version_tracker_web_id=</span><span class="method-args">(value)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Setter for virtual attribute
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000113-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000113-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 193</span>
193:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">version_tracker_web_id=</span>(<span class="ruby-identifier">value</span>)
194:     <span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">version_tracker_web_id</span> = <span class="ruby-identifier">value</span>
195:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000123" class="method-detail">
        <a name="M000123"></a>

        <div class="method-heading">

          <a href="#M000123" class="method-signature">

          <span class="method-name">versions</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000123-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000123-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 292</span>
292:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">versions</span>
293:     <span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">packages_like_unit_member</span>(<span class="ruby-keyword kw">self</span>)
294:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000126" class="method-detail">
        <a name="M000126"></a>

        <div class="method-heading">

          <a href="#M000126" class="method-signature">

          <span class="method-name">vtv</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Get the version that corresponds with the version tracker version This is
intended to handle some oddities in the version tracker database. For
example, if you version 3.0.1 and version tracker has the same version but
written as 3.0.1b, you may manually override otherwise, it will return the
version of this record. This getter will grab the version attribute if
version_tracker_version is nil. Used by <a
href="VersionTracker.html">VersionTracker</a> class.
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000126-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000126-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/package.rb, line 324</span>
324:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">vtv</span>
325:     <span class="ruby-identifier">vtv</span> = <span class="ruby-identifier">version_tracker_version</span>
326:     <span class="ruby-identifier">vtv</span> = <span class="ruby-identifier">version</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">vtv</span>.<span class="ruby-identifier">blank?</span>
327:     <span class="ruby-identifier">vtv</span>
328:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>



    </div>




  </div>

<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>
