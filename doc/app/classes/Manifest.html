<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: Manifest [Rails Application Documentation]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;

    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }

  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }<\/style>" )

  // ]]>
  </script>

</head>
<body>


    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">Manifest</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>


                <a href="../files/app/models/magic_mixin/manifest_rb.html">

                app/models/magic_mixin/manifest.rb

                </a>


        <br />

            </td>
        </tr>


        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">

  <div id="contextContent">

    <div id="description">
      <p>
Special ActiveRecord::Base mixin module
</p>

    </div>

   </div>


    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">

        <a href="#M000275">assignable_package_branches</a>&nbsp;&nbsp;

        <a href="#M000262">build_package_association_assignment</a>&nbsp;&nbsp;

        <a href="#M000284">default</a>&nbsp;&nbsp;

        <a href="#M000259">environments</a>&nbsp;&nbsp;

        <a href="#M000258">extend_class</a>&nbsp;&nbsp;

        <a href="#M000281">find_for_show</a>&nbsp;&nbsp;

        <a href="#M000280">included_manifests</a>&nbsp;&nbsp;

        <a href="#M000263">installs</a>&nbsp;&nbsp;

        <a href="#M000264">installs=</a>&nbsp;&nbsp;

        <a href="#M000265">installs_package_branch_ids</a>&nbsp;&nbsp;

        <a href="#M000260">managed_installs</a>&nbsp;&nbsp;

        <a href="#M000261">managed_uninstalls</a>&nbsp;&nbsp;

        <a href="#M000277">serialize_for_plist</a>&nbsp;&nbsp;

        <a href="#M000278">serialize_for_plist_super</a>&nbsp;&nbsp;

        <a href="#M000283">tas_params</a>&nbsp;&nbsp;

        <a href="#M000282">tas_params</a>&nbsp;&nbsp;

        <a href="#M000279">to_plist</a>&nbsp;&nbsp;

        <a href="#M000276">to_s</a>&nbsp;&nbsp;

        <a href="#M000266">uninstalls</a>&nbsp;&nbsp;

        <a href="#M000267">uninstalls=</a>&nbsp;&nbsp;

        <a href="#M000268">uninstalls_package_branch_ids</a>&nbsp;&nbsp;

        <a href="#M000269">user_installs</a>&nbsp;&nbsp;

        <a href="#M000270">user_installs=</a>&nbsp;&nbsp;

        <a href="#M000271">user_installs_package_branch_ids</a>&nbsp;&nbsp;

        <a href="#M000272">user_uninstalls</a>&nbsp;&nbsp;

        <a href="#M000273">user_uninstalls=</a>&nbsp;&nbsp;

        <a href="#M000274">user_uninstalls_package_branch_ids</a>&nbsp;&nbsp;

      </div>
    </div>

  </div>

    <!-- if includes -->

    <div id="section">

    <div id="aliases-list">
      <h3 class="section-bar">External Aliases</h3>

      <div class="name-list">
      <table summary="aliases">

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">find_for_show</td>
          <td>-&gt;</td>
          <td class="context-item-value">find_for_show_super</td>
        </tr>

        </table>
      </div>
    </div>




    <!-- if method_list -->

    <div id="methods">

      <h3 class="section-bar">Public Class methods</h3>


      <div id="method-M000284" class="method-detail">
        <a name="M000284"></a>

        <div class="method-heading">

          <a href="#M000284" class="method-signature">

          <span class="method-name">default</span><span class="method-args">(unit)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Return the default record Requires a unit to be passed
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000284-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000284-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 236</span>
236:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">default</span>(<span class="ruby-identifier">unit</span>)
237:         <span class="ruby-identifier">r</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unit</span>(<span class="ruby-identifier">unit</span>).<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">&quot;Default&quot;</span>)
238:         <span class="ruby-identifier">r</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unit</span>(<span class="ruby-identifier">unit</span>).<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">&quot;default&quot;</span>)
239:         <span class="ruby-identifier">r</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unit</span>(<span class="ruby-identifier">unit</span>).<span class="ruby-identifier">first</span>
240:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000258" class="method-detail">
        <a name="M000258"></a>

        <div class="method-heading">

          <a href="#M000258" class="method-signature">

          <span class="method-name">extend_class</span><span class="method-args">(k)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Used to augment the class definition of the class passed as an argument Put
class customization in here!
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000258-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000258-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 6</span>
  6:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">extend_class</span>(<span class="ruby-identifier">k</span>)
  7:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">class_exec</span> <span class="ruby-keyword kw">do</span>
  8:       <span class="ruby-comment cmt"># ====================</span>
  9:       <span class="ruby-comment cmt"># = Code start here! =</span>
 10:       <span class="ruby-comment cmt"># ====================</span>
 11:       
 12:       <span class="ruby-comment cmt"># Validations</span>
 13:       <span class="ruby-identifier">validates_uniqueness_of</span> <span class="ruby-identifier">:name</span>
 14:       <span class="ruby-identifier">validates_presence_of</span> <span class="ruby-identifier">:name</span>
 15:       
 16:       <span class="ruby-comment cmt"># Bundles</span>
 17:       <span class="ruby-identifier">has_many</span> <span class="ruby-identifier">:bundle_items</span>, <span class="ruby-identifier">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:manifest</span>
 18:       <span class="ruby-identifier">has_many</span> <span class="ruby-identifier">:bundles</span>, <span class="ruby-identifier">:through</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:bundle_items</span>
 19:       
 20:       <span class="ruby-comment cmt"># Install and uninstall items</span>
 21:       <span class="ruby-identifier">has_many</span> <span class="ruby-identifier">:install_items</span>, <span class="ruby-identifier">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:manifest</span>
 22:       <span class="ruby-identifier">has_many</span> <span class="ruby-identifier">:uninstall_items</span>, <span class="ruby-identifier">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:manifest</span>
 23:       
 24:       <span class="ruby-comment cmt"># A list of user allowed install/uninstall items</span>
 25:       <span class="ruby-identifier">has_many</span> <span class="ruby-identifier">:user_allowed_items</span>, <span class="ruby-identifier">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:manifest</span>
 26:       
 27:       <span class="ruby-comment cmt"># User specified install and uninstall items</span>
 28:       <span class="ruby-identifier">has_many</span> <span class="ruby-identifier">:user_install_items</span>, <span class="ruby-identifier">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:manifest</span>
 29:       <span class="ruby-identifier">has_many</span> <span class="ruby-identifier">:user_uninstall_items</span>, <span class="ruby-identifier">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:manifest</span>
 30:       
 31:       <span class="ruby-identifier">attr_is_hash</span> <span class="ruby-identifier">:version_rollback</span>
 32:       
 33:       <span class="ruby-identifier">magic_mixin</span> <span class="ruby-identifier">:unit_member</span>
 34:       
 35:       <span class="ruby-comment cmt"># Return all the environments visible to this object</span>
 36:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">environments</span>
 37:         <span class="ruby-identifier">environment</span>.<span class="ruby-identifier">environments</span>
 38:       <span class="ruby-keyword kw">end</span>
 39:       
 40:       <span class="ruby-comment cmt"># Concatentates installs (specified by admins) and user installs (specified</span>
 41:       <span class="ruby-comment cmt"># by users) to create the managed_installs virtual attribute</span>
 42:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">managed_installs</span>
 43:         <span class="ruby-identifier">installs</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">user_installs</span>
 44:       <span class="ruby-keyword kw">end</span>
 45: 
 46:       <span class="ruby-comment cmt"># Concatentates installs (specified by admins) and user installs (specified</span>
 47:       <span class="ruby-comment cmt"># by users) to create the managed_installs virtual attribute</span>
 48:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">managed_uninstalls</span>
 49:         <span class="ruby-identifier">uninstalls</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">user_uninstalls</span>
 50:       <span class="ruby-keyword kw">end</span>
 51:       
 52:       <span class="ruby-comment cmt"># Assign the list of items to a specific association (assoc)</span>
 53:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_package_association_assignment</span>(<span class="ruby-identifier">assoc</span>,<span class="ruby-identifier">list</span>)
 54:         <span class="ruby-comment cmt"># Blank out the association</span>
 55:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{assoc}=&quot;</span>,[])
 56:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">nil?</span>
 57:           <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
 58:             <span class="ruby-comment cmt"># Create association for...</span>
 59:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Package</span>
 60:               <span class="ruby-comment cmt"># ...a specific package</span>
 61:               <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{assoc}&quot;</span>).<span class="ruby-identifier">build</span>({<span class="ruby-identifier">:package_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:package_branch_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">id</span>})
 62:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">PackageBranch</span>
 63:               <span class="ruby-comment cmt"># ...the latest package from a package branch</span>
 64:               <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{assoc}&quot;</span>).<span class="ruby-identifier">build</span>({<span class="ruby-identifier">:package_branch_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">id</span>})
 65:             <span class="ruby-keyword kw">end</span>
 66:           <span class="ruby-keyword kw">end</span>
 67:         <span class="ruby-keyword kw">end</span>
 68:       <span class="ruby-keyword kw">end</span>
 69:       
 70:       <span class="ruby-comment cmt"># Gets the packages that belong to this manifests installs virtual attribute</span>
 71:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">installs</span>
 72:         <span class="ruby-identifier">install_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package</span>)
 73:       <span class="ruby-keyword kw">end</span>
 74:       
 75:       <span class="ruby-comment cmt"># Pass a list of Package or PackageBranch records and install_item associations will be built</span>
 76:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">installs=</span>(<span class="ruby-identifier">list</span>)
 77:         <span class="ruby-identifier">build_package_association_assignment</span>(<span class="ruby-identifier">:install_items</span>,<span class="ruby-identifier">list</span>)
 78:       <span class="ruby-keyword kw">end</span>
 79:       
 80:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">installs_package_branch_ids</span>
 81:         <span class="ruby-identifier">install_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package_branch</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
 82:       <span class="ruby-keyword kw">end</span>
 83:       
 84:       <span class="ruby-comment cmt"># Gets the packages that belong to this manifests uninstalls virtual attribute</span>
 85:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">uninstalls</span>
 86:         <span class="ruby-identifier">uninstall_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package</span>)
 87:       <span class="ruby-keyword kw">end</span>
 88: 
 89:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">uninstalls=</span>(<span class="ruby-identifier">list</span>)
 90:         <span class="ruby-identifier">build_package_association_assignment</span>(<span class="ruby-identifier">:uninstall_items</span>,<span class="ruby-identifier">list</span>)
 91:       <span class="ruby-keyword kw">end</span>
 92: 
 93:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">uninstalls_package_branch_ids</span>
 94:         <span class="ruby-identifier">uninstall_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package_branch</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
 95:       <span class="ruby-keyword kw">end</span>
 96: 
 97:       <span class="ruby-comment cmt"># Gets the packages that belong to this manifests user_installs virtual attribute      </span>
 98:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_installs</span>
 99:         <span class="ruby-identifier">user_install_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package</span>)
100:       <span class="ruby-keyword kw">end</span>
101:       
102:       <span class="ruby-comment cmt"># Pass a list of Package or PackageBranch records and install_item associations will be built</span>
103:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_installs=</span>(<span class="ruby-identifier">list</span>)
104:         <span class="ruby-identifier">build_package_association_assignment</span>(<span class="ruby-identifier">:user_install_items</span>,<span class="ruby-identifier">list</span>)
105:       <span class="ruby-keyword kw">end</span>
106:       
107:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_installs_package_branch_ids</span>
108:         <span class="ruby-identifier">user_install_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package_branch</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
109:       <span class="ruby-keyword kw">end</span>
110:       
111:       <span class="ruby-comment cmt"># Gets the packages that belong to this manifests user_uninstalls virtual attribute      </span>
112:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_uninstalls</span>
113:         <span class="ruby-identifier">user_uninstall_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package</span>)
114:       <span class="ruby-keyword kw">end</span>
115:       
116:       <span class="ruby-comment cmt"># Pass a list of Package or PackageBranch records and install_item associations will be built</span>
117:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_uninstalls=</span>(<span class="ruby-identifier">list</span>)
118:         <span class="ruby-identifier">build_package_association_assignment</span>(<span class="ruby-identifier">:user_uninstall_items</span>,<span class="ruby-identifier">list</span>)
119:       <span class="ruby-keyword kw">end</span>  
120: 
121:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_uninstalls_package_branch_ids</span>
122:         <span class="ruby-identifier">user_uninstall_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package_branch</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
123:       <span class="ruby-keyword kw">end</span>
124: 
125:       <span class="ruby-comment cmt"># Returns all package_branches that belongs to the unit and the environment</span>
126:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">assignable_package_branches</span>
127:         <span class="ruby-comment cmt"># Grab all package branches referenced by packages of this unit and environment</span>
128:         <span class="ruby-comment cmt"># TO-DO use include to minimize db queries made for package_branches</span>
129:         <span class="ruby-identifier">packages</span> = <span class="ruby-constant">Package</span>.<span class="ruby-identifier">unit</span>(<span class="ruby-identifier">unit</span>).<span class="ruby-identifier">environments</span>(<span class="ruby-identifier">environments</span>)
130:         <span class="ruby-identifier">package_branches</span> = <span class="ruby-identifier">packages</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">package_branch</span> }
131:         
132:         <span class="ruby-comment cmt"># Remove duplicate package branches from the list of package branches</span>
133:         <span class="ruby-identifier">uniq_pb_ids</span> = []
134:         <span class="ruby-identifier">uniq_pbs</span> = []
135:         <span class="ruby-identifier">package_branches</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pb</span><span class="ruby-operator">|</span>
136:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">uniq_pb_ids</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">pb</span>.<span class="ruby-identifier">id</span>)
137:             <span class="ruby-identifier">uniq_pbs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">pb</span>
138:             <span class="ruby-identifier">uniq_pb_ids</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">pb</span>.<span class="ruby-identifier">id</span>
139:           <span class="ruby-keyword kw">end</span>
140:         <span class="ruby-keyword kw">end</span>
141:         
142:         <span class="ruby-identifier">uniq_pbs</span>
143:       <span class="ruby-keyword kw">end</span>
144:       
145:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">format</span> = <span class="ruby-keyword kw">nil</span>)
146:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">format</span>
147:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:unique</span> <span class="ruby-keyword kw">then</span> <span class="ruby-node">&quot;#{id}_#{name}&quot;</span>
148:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:path</span> <span class="ruby-keyword kw">then</span> <span class="ruby-node">&quot;#{self.class.to_s.pluralize.tableize}/#{self.to_s(:unique)}&quot;</span>
149:           <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">name</span>
150:         <span class="ruby-keyword kw">end</span>
151:       <span class="ruby-keyword kw">end</span>
152: 
153:       <span class="ruby-comment cmt"># Create a hash intended for plist output</span>
154:       <span class="ruby-comment cmt"># Won't include the entire object attributes</span>
155:       <span class="ruby-comment cmt"># but only the ones relevant for munki clients</span>
156:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">serialize_for_plist</span>
157:         <span class="ruby-identifier">h</span> = {}
158:         <span class="ruby-identifier">h</span>[<span class="ruby-identifier">:name</span>] = <span class="ruby-identifier">name</span>
159:         <span class="ruby-identifier">h</span>[<span class="ruby-identifier">:included_manifests</span>] = <span class="ruby-identifier">included_manifests</span>
160:         <span class="ruby-identifier">h</span>[<span class="ruby-identifier">:managed_installs</span>] = <span class="ruby-identifier">managed_installs</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)
161:         <span class="ruby-identifier">h</span>[<span class="ruby-identifier">:managed_uninstalls</span>] = <span class="ruby-identifier">managed_uninstalls</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)
162:         <span class="ruby-identifier">h</span>
163:       <span class="ruby-keyword kw">end</span>
164:       <span class="ruby-keyword kw">alias</span> <span class="ruby-identifier">:serialize_for_plist_super</span> <span class="ruby-identifier">:serialize_for_plist</span>
165: 
166:       <span class="ruby-comment cmt"># Converts serialized object into plist string</span>
167:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_plist</span>
168:         <span class="ruby-identifier">serialize_for_plist</span>.<span class="ruby-identifier">to_plist</span>
169:       <span class="ruby-keyword kw">end</span>
170: 
171:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">included_manifests</span>
172:         <span class="ruby-identifier">a</span> = <span class="ruby-identifier">bundles</span>.<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{e.to_s(:path)}.plist&quot;</span>}
173:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:computer_group</span>)
174:           <span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{computer_group.to_s(:path)}.plist&quot;</span>
175:         <span class="ruby-keyword kw">end</span>
176:         <span class="ruby-identifier">a</span>
177:       <span class="ruby-keyword kw">end</span>
178:       
179:       <span class="ruby-comment cmt"># Attempts a couple different queries in order of importance to</span>
180:       <span class="ruby-comment cmt"># find the appropriate record for the show action</span>
181:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">find_for_show</span>(<span class="ruby-identifier">s</span>)
182:         <span class="ruby-comment cmt"># Find by ID</span>
183:         <span class="ruby-identifier">record</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">s</span>).<span class="ruby-identifier">first</span>
184:         <span class="ruby-comment cmt"># Find by id-name</span>
185:         <span class="ruby-identifier">match</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/(\d+)(-)(.+)(\.plist)/</span>)
186:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">match</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Array</span>
187:           <span class="ruby-identifier">id</span> = <span class="ruby-identifier">match</span>[<span class="ruby-value">1</span>]
188:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">match</span>[<span class="ruby-value">3</span>]
189:           <span class="ruby-identifier">record</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">id</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>).<span class="ruby-identifier">first</span>
190:         <span class="ruby-keyword kw">end</span>
191:         <span class="ruby-comment cmt"># Return results</span>
192:         <span class="ruby-identifier">record</span>
193:       <span class="ruby-keyword kw">end</span>
194:       <span class="ruby-comment cmt"># Alias to allow quasi super access</span>
195:       <span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>
196:         <span class="ruby-keyword kw">alias</span> <span class="ruby-identifier">:find_for_show_super</span> <span class="ruby-identifier">:find_for_show</span>
197:       <span class="ruby-keyword kw">end</span>
198:       
199:       <span class="ruby-comment cmt"># Default parameters for the table_asm_select method</span>
200:       <span class="ruby-comment cmt"># Returns values for self</span>
201:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tas_params</span>
202:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">tas_params</span>(<span class="ruby-keyword kw">self</span>)
203:       <span class="ruby-keyword kw">end</span>
204: 
205:       <span class="ruby-comment cmt"># Default parameters for a tabled_asm_select method</span>
206:       <span class="ruby-comment cmt"># Takes an object of the current class and returns params</span>
207:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">tas_params</span>(<span class="ruby-identifier">model_obj</span>)
208:         <span class="ruby-comment cmt"># Get all the package branches associated with this unit and environment</span>
209:         <span class="ruby-identifier">pkg_branch_options</span> = <span class="ruby-constant">PackageBranch</span>.<span class="ruby-identifier">unit_member</span>(<span class="ruby-identifier">model_obj</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">e</span>.<span class="ruby-identifier">name</span>,<span class="ruby-identifier">e</span>.<span class="ruby-identifier">id</span>] }
210:         <span class="ruby-identifier">bundle_options</span> = <span class="ruby-constant">Bundle</span>.<span class="ruby-identifier">unit_member</span>(<span class="ruby-identifier">model_obj</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">e</span>.<span class="ruby-identifier">name</span>,<span class="ruby-identifier">e</span>.<span class="ruby-identifier">id</span>] }
211:         <span class="ruby-identifier">model_name</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">underscore</span>
212: 
213:         <span class="ruby-comment cmt"># Array for table_asm_select</span>
214:         [{<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Bundles&quot;</span>,
215:           <span class="ruby-identifier">:model_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_name</span>,
216:           <span class="ruby-identifier">:attribute_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;bundles&quot;</span>,
217:           <span class="ruby-identifier">:select_title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Select a bundle&quot;</span>,
218:           <span class="ruby-identifier">:options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bundle_options</span>,
219:           <span class="ruby-identifier">:selected_options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_obj</span>.<span class="ruby-identifier">bundle_ids</span> },
220:          {<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Installs&quot;</span>,
221:           <span class="ruby-identifier">:model_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_name</span>,
222:           <span class="ruby-identifier">:attribute_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;installs&quot;</span>,
223:           <span class="ruby-identifier">:select_title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Select a package branch&quot;</span>,
224:           <span class="ruby-identifier">:options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">pkg_branch_options</span>,
225:           <span class="ruby-identifier">:selected_options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_obj</span>.<span class="ruby-identifier">installs_package_branch_ids</span> },
226:          {<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Uninstalls&quot;</span>,
227:           <span class="ruby-identifier">:model_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_name</span> ,
228:           <span class="ruby-identifier">:attribute_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;uninstalls&quot;</span>,
229:           <span class="ruby-identifier">:select_title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Select a package branch&quot;</span>,
230:           <span class="ruby-identifier">:options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">pkg_branch_options</span>,
231:           <span class="ruby-identifier">:selected_options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_obj</span>.<span class="ruby-identifier">uninstalls_package_branch_ids</span> }]
232:       <span class="ruby-keyword kw">end</span>
233:       
234:       <span class="ruby-comment cmt"># Return the default record</span>
235:       <span class="ruby-comment cmt"># Requires a unit to be passed</span>
236:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">default</span>(<span class="ruby-identifier">unit</span>)
237:         <span class="ruby-identifier">r</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unit</span>(<span class="ruby-identifier">unit</span>).<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">&quot;Default&quot;</span>)
238:         <span class="ruby-identifier">r</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unit</span>(<span class="ruby-identifier">unit</span>).<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">&quot;default&quot;</span>)
239:         <span class="ruby-identifier">r</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unit</span>(<span class="ruby-identifier">unit</span>).<span class="ruby-identifier">first</span>
240:       <span class="ruby-keyword kw">end</span>
241:       
242:       <span class="ruby-comment cmt"># ===================</span>
243:       <span class="ruby-comment cmt"># = Code ends here! =</span>
244:       <span class="ruby-comment cmt"># ===================</span>
245:     <span class="ruby-keyword kw">end</span>
246:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000281" class="method-detail">
        <a name="M000281"></a>

        <div class="method-heading">

          <a href="#M000281" class="method-signature">

          <span class="method-name">find_for_show</span><span class="method-args">(s)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Attempts a couple different queries in order of importance to find the
appropriate record for the show action
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000281-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000281-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 181</span>
181:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">find_for_show</span>(<span class="ruby-identifier">s</span>)
182:         <span class="ruby-comment cmt"># Find by ID</span>
183:         <span class="ruby-identifier">record</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">s</span>).<span class="ruby-identifier">first</span>
184:         <span class="ruby-comment cmt"># Find by id-name</span>
185:         <span class="ruby-identifier">match</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/(\d+)(-)(.+)(\.plist)/</span>)
186:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">match</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Array</span>
187:           <span class="ruby-identifier">id</span> = <span class="ruby-identifier">match</span>[<span class="ruby-value">1</span>]
188:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">match</span>[<span class="ruby-value">3</span>]
189:           <span class="ruby-identifier">record</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">id</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>).<span class="ruby-identifier">first</span>
190:         <span class="ruby-keyword kw">end</span>
191:         <span class="ruby-comment cmt"># Return results</span>
192:         <span class="ruby-identifier">record</span>
193:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000283" class="method-detail">
        <a name="M000283"></a>

        <div class="method-heading">

          <a href="#M000283" class="method-signature">

          <span class="method-name">tas_params</span><span class="method-args">(model_obj)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Default parameters for a tabled_asm_select method Takes an object of the
current class and returns params
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000283-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000283-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 207</span>
207:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">tas_params</span>(<span class="ruby-identifier">model_obj</span>)
208:         <span class="ruby-comment cmt"># Get all the package branches associated with this unit and environment</span>
209:         <span class="ruby-identifier">pkg_branch_options</span> = <span class="ruby-constant">PackageBranch</span>.<span class="ruby-identifier">unit_member</span>(<span class="ruby-identifier">model_obj</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">e</span>.<span class="ruby-identifier">name</span>,<span class="ruby-identifier">e</span>.<span class="ruby-identifier">id</span>] }
210:         <span class="ruby-identifier">bundle_options</span> = <span class="ruby-constant">Bundle</span>.<span class="ruby-identifier">unit_member</span>(<span class="ruby-identifier">model_obj</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">e</span>.<span class="ruby-identifier">name</span>,<span class="ruby-identifier">e</span>.<span class="ruby-identifier">id</span>] }
211:         <span class="ruby-identifier">model_name</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">underscore</span>
212: 
213:         <span class="ruby-comment cmt"># Array for table_asm_select</span>
214:         [{<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Bundles&quot;</span>,
215:           <span class="ruby-identifier">:model_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_name</span>,
216:           <span class="ruby-identifier">:attribute_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;bundles&quot;</span>,
217:           <span class="ruby-identifier">:select_title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Select a bundle&quot;</span>,
218:           <span class="ruby-identifier">:options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bundle_options</span>,
219:           <span class="ruby-identifier">:selected_options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_obj</span>.<span class="ruby-identifier">bundle_ids</span> },
220:          {<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Installs&quot;</span>,
221:           <span class="ruby-identifier">:model_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_name</span>,
222:           <span class="ruby-identifier">:attribute_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;installs&quot;</span>,
223:           <span class="ruby-identifier">:select_title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Select a package branch&quot;</span>,
224:           <span class="ruby-identifier">:options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">pkg_branch_options</span>,
225:           <span class="ruby-identifier">:selected_options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_obj</span>.<span class="ruby-identifier">installs_package_branch_ids</span> },
226:          {<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Uninstalls&quot;</span>,
227:           <span class="ruby-identifier">:model_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_name</span> ,
228:           <span class="ruby-identifier">:attribute_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;uninstalls&quot;</span>,
229:           <span class="ruby-identifier">:select_title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Select a package branch&quot;</span>,
230:           <span class="ruby-identifier">:options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">pkg_branch_options</span>,
231:           <span class="ruby-identifier">:selected_options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">model_obj</span>.<span class="ruby-identifier">uninstalls_package_branch_ids</span> }]
232:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <h3 class="section-bar">Public Instance methods</h3>


      <div id="method-M000275" class="method-detail">
        <a name="M000275"></a>

        <div class="method-heading">

          <a href="#M000275" class="method-signature">

          <span class="method-name">assignable_package_branches</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns all package_branches that belongs to the unit and the environment
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000275-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000275-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 126</span>
126:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">assignable_package_branches</span>
127:         <span class="ruby-comment cmt"># Grab all package branches referenced by packages of this unit and environment</span>
128:         <span class="ruby-comment cmt"># TO-DO use include to minimize db queries made for package_branches</span>
129:         <span class="ruby-identifier">packages</span> = <span class="ruby-constant">Package</span>.<span class="ruby-identifier">unit</span>(<span class="ruby-identifier">unit</span>).<span class="ruby-identifier">environments</span>(<span class="ruby-identifier">environments</span>)
130:         <span class="ruby-identifier">package_branches</span> = <span class="ruby-identifier">packages</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">package_branch</span> }
131:         
132:         <span class="ruby-comment cmt"># Remove duplicate package branches from the list of package branches</span>
133:         <span class="ruby-identifier">uniq_pb_ids</span> = []
134:         <span class="ruby-identifier">uniq_pbs</span> = []
135:         <span class="ruby-identifier">package_branches</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pb</span><span class="ruby-operator">|</span>
136:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">uniq_pb_ids</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">pb</span>.<span class="ruby-identifier">id</span>)
137:             <span class="ruby-identifier">uniq_pbs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">pb</span>
138:             <span class="ruby-identifier">uniq_pb_ids</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">pb</span>.<span class="ruby-identifier">id</span>
139:           <span class="ruby-keyword kw">end</span>
140:         <span class="ruby-keyword kw">end</span>
141:         
142:         <span class="ruby-identifier">uniq_pbs</span>
143:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000262" class="method-detail">
        <a name="M000262"></a>

        <div class="method-heading">

          <a href="#M000262" class="method-signature">

          <span class="method-name">build_package_association_assignment</span><span class="method-args">(assoc,list)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Assign the list of items to a specific association (assoc)
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000262-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000262-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 53</span>
53:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_package_association_assignment</span>(<span class="ruby-identifier">assoc</span>,<span class="ruby-identifier">list</span>)
54:         <span class="ruby-comment cmt"># Blank out the association</span>
55:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{assoc}=&quot;</span>,[])
56:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">nil?</span>
57:           <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
58:             <span class="ruby-comment cmt"># Create association for...</span>
59:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Package</span>
60:               <span class="ruby-comment cmt"># ...a specific package</span>
61:               <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{assoc}&quot;</span>).<span class="ruby-identifier">build</span>({<span class="ruby-identifier">:package_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:package_branch_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">package_branch</span>.<span class="ruby-identifier">id</span>})
62:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">PackageBranch</span>
63:               <span class="ruby-comment cmt"># ...the latest package from a package branch</span>
64:               <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{assoc}&quot;</span>).<span class="ruby-identifier">build</span>({<span class="ruby-identifier">:package_branch_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">id</span>})
65:             <span class="ruby-keyword kw">end</span>
66:           <span class="ruby-keyword kw">end</span>
67:         <span class="ruby-keyword kw">end</span>
68:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000259" class="method-detail">
        <a name="M000259"></a>

        <div class="method-heading">

          <a href="#M000259" class="method-signature">

          <span class="method-name">environments</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Return all the environments visible to this object
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000259-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000259-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 36</span>
36:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">environments</span>
37:         <span class="ruby-identifier">environment</span>.<span class="ruby-identifier">environments</span>
38:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000280" class="method-detail">
        <a name="M000280"></a>

        <div class="method-heading">

          <a href="#M000280" class="method-signature">

          <span class="method-name">included_manifests</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000280-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000280-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 171</span>
171:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">included_manifests</span>
172:         <span class="ruby-identifier">a</span> = <span class="ruby-identifier">bundles</span>.<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{e.to_s(:path)}.plist&quot;</span>}
173:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:computer_group</span>)
174:           <span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{computer_group.to_s(:path)}.plist&quot;</span>
175:         <span class="ruby-keyword kw">end</span>
176:         <span class="ruby-identifier">a</span>
177:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000263" class="method-detail">
        <a name="M000263"></a>

        <div class="method-heading">

          <a href="#M000263" class="method-signature">

          <span class="method-name">installs</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Gets the packages that belong to this manifests installs virtual attribute
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000263-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000263-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 71</span>
71:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">installs</span>
72:         <span class="ruby-identifier">install_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package</span>)
73:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000264" class="method-detail">
        <a name="M000264"></a>

        <div class="method-heading">

          <a href="#M000264" class="method-signature">

          <span class="method-name">installs=</span><span class="method-args">(list)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Pass a list of <a href="Package.html">Package</a> or <a
href="PackageBranch.html">PackageBranch</a> records and install_item
associations will be built
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000264-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000264-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 76</span>
76:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">installs=</span>(<span class="ruby-identifier">list</span>)
77:         <span class="ruby-identifier">build_package_association_assignment</span>(<span class="ruby-identifier">:install_items</span>,<span class="ruby-identifier">list</span>)
78:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000265" class="method-detail">
        <a name="M000265"></a>

        <div class="method-heading">

          <a href="#M000265" class="method-signature">

          <span class="method-name">installs_package_branch_ids</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000265-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000265-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 80</span>
80:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">installs_package_branch_ids</span>
81:         <span class="ruby-identifier">install_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package_branch</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
82:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000260" class="method-detail">
        <a name="M000260"></a>

        <div class="method-heading">

          <a href="#M000260" class="method-signature">

          <span class="method-name">managed_installs</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Concatentates installs (specified by admins) and user installs (specified
by users) to create the <a
href="Manifest.html#M000260">managed_installs</a> virtual attribute
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000260-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000260-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 42</span>
42:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">managed_installs</span>
43:         <span class="ruby-identifier">installs</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">user_installs</span>
44:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000261" class="method-detail">
        <a name="M000261"></a>

        <div class="method-heading">

          <a href="#M000261" class="method-signature">

          <span class="method-name">managed_uninstalls</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Concatentates installs (specified by admins) and user installs (specified
by users) to create the <a
href="Manifest.html#M000260">managed_installs</a> virtual attribute
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000261-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000261-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 48</span>
48:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">managed_uninstalls</span>
49:         <span class="ruby-identifier">uninstalls</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">user_uninstalls</span>
50:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000277" class="method-detail">
        <a name="M000277"></a>

        <div class="method-heading">

          <a href="#M000277" class="method-signature">

          <span class="method-name">serialize_for_plist</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Create a hash intended for plist output Won&#8217;t include the entire
object attributes but only the ones relevant for munki clients
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000277-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000277-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 156</span>
156:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">serialize_for_plist</span>
157:         <span class="ruby-identifier">h</span> = {}
158:         <span class="ruby-identifier">h</span>[<span class="ruby-identifier">:name</span>] = <span class="ruby-identifier">name</span>
159:         <span class="ruby-identifier">h</span>[<span class="ruby-identifier">:included_manifests</span>] = <span class="ruby-identifier">included_manifests</span>
160:         <span class="ruby-identifier">h</span>[<span class="ruby-identifier">:managed_installs</span>] = <span class="ruby-identifier">managed_installs</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)
161:         <span class="ruby-identifier">h</span>[<span class="ruby-identifier">:managed_uninstalls</span>] = <span class="ruby-identifier">managed_uninstalls</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)
162:         <span class="ruby-identifier">h</span>
163:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000278" class="method-detail">
        <a name="M000278"></a>

        <div class="method-heading">

          <span class="method-name">serialize_for_plist_super</span><span class="method-args">()</span>

        </div>

        <div class="method-description">

          <p>
Alias for <a href="Manifest.html#M000277">serialize_for_plist</a>
</p>

        </div>
      </div>


      <div id="method-M000282" class="method-detail">
        <a name="M000282"></a>

        <div class="method-heading">

          <a href="#M000282" class="method-signature">

          <span class="method-name">tas_params</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Default parameters for the table_asm_select method Returns values for self
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000282-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000282-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 201</span>
201:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tas_params</span>
202:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">tas_params</span>(<span class="ruby-keyword kw">self</span>)
203:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000279" class="method-detail">
        <a name="M000279"></a>

        <div class="method-heading">

          <a href="#M000279" class="method-signature">

          <span class="method-name">to_plist</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Converts serialized object into plist string
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000279-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000279-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 167</span>
167:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_plist</span>
168:         <span class="ruby-identifier">serialize_for_plist</span>.<span class="ruby-identifier">to_plist</span>
169:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000276" class="method-detail">
        <a name="M000276"></a>

        <div class="method-heading">

          <a href="#M000276" class="method-signature">

          <span class="method-name">to_s</span><span class="method-args">(format = nil)</span>

          </a>

        </div>

        <div class="method-description">

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000276-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000276-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 145</span>
145:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">format</span> = <span class="ruby-keyword kw">nil</span>)
146:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">format</span>
147:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:unique</span> <span class="ruby-keyword kw">then</span> <span class="ruby-node">&quot;#{id}_#{name}&quot;</span>
148:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:path</span> <span class="ruby-keyword kw">then</span> <span class="ruby-node">&quot;#{self.class.to_s.pluralize.tableize}/#{self.to_s(:unique)}&quot;</span>
149:           <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">name</span>
150:         <span class="ruby-keyword kw">end</span>
151:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000266" class="method-detail">
        <a name="M000266"></a>

        <div class="method-heading">

          <a href="#M000266" class="method-signature">

          <span class="method-name">uninstalls</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Gets the packages that belong to this manifests uninstalls virtual
attribute
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000266-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000266-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 85</span>
85:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">uninstalls</span>
86:         <span class="ruby-identifier">uninstall_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package</span>)
87:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000267" class="method-detail">
        <a name="M000267"></a>

        <div class="method-heading">

          <a href="#M000267" class="method-signature">

          <span class="method-name">uninstalls=</span><span class="method-args">(list)</span>

          </a>

        </div>

        <div class="method-description">

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000267-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000267-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 89</span>
89:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">uninstalls=</span>(<span class="ruby-identifier">list</span>)
90:         <span class="ruby-identifier">build_package_association_assignment</span>(<span class="ruby-identifier">:uninstall_items</span>,<span class="ruby-identifier">list</span>)
91:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000268" class="method-detail">
        <a name="M000268"></a>

        <div class="method-heading">

          <a href="#M000268" class="method-signature">

          <span class="method-name">uninstalls_package_branch_ids</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000268-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000268-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 93</span>
93:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">uninstalls_package_branch_ids</span>
94:         <span class="ruby-identifier">uninstall_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package_branch</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
95:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000269" class="method-detail">
        <a name="M000269"></a>

        <div class="method-heading">

          <a href="#M000269" class="method-signature">

          <span class="method-name">user_installs</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Gets the packages that belong to this manifests <a
href="Manifest.html#M000269">user_installs</a> virtual attribute
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000269-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000269-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 98</span>
 98:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_installs</span>
 99:         <span class="ruby-identifier">user_install_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package</span>)
100:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000270" class="method-detail">
        <a name="M000270"></a>

        <div class="method-heading">

          <a href="#M000270" class="method-signature">

          <span class="method-name">user_installs=</span><span class="method-args">(list)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Pass a list of <a href="Package.html">Package</a> or <a
href="PackageBranch.html">PackageBranch</a> records and install_item
associations will be built
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000270-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000270-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 103</span>
103:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_installs=</span>(<span class="ruby-identifier">list</span>)
104:         <span class="ruby-identifier">build_package_association_assignment</span>(<span class="ruby-identifier">:user_install_items</span>,<span class="ruby-identifier">list</span>)
105:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000271" class="method-detail">
        <a name="M000271"></a>

        <div class="method-heading">

          <a href="#M000271" class="method-signature">

          <span class="method-name">user_installs_package_branch_ids</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000271-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000271-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 107</span>
107:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_installs_package_branch_ids</span>
108:         <span class="ruby-identifier">user_install_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package_branch</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
109:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000272" class="method-detail">
        <a name="M000272"></a>

        <div class="method-heading">

          <a href="#M000272" class="method-signature">

          <span class="method-name">user_uninstalls</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Gets the packages that belong to this manifests <a
href="Manifest.html#M000272">user_uninstalls</a> virtual attribute
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000272-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000272-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 112</span>
112:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_uninstalls</span>
113:         <span class="ruby-identifier">user_uninstall_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package</span>)
114:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000273" class="method-detail">
        <a name="M000273"></a>

        <div class="method-heading">

          <a href="#M000273" class="method-signature">

          <span class="method-name">user_uninstalls=</span><span class="method-args">(list)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Pass a list of <a href="Package.html">Package</a> or <a
href="PackageBranch.html">PackageBranch</a> records and install_item
associations will be built
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000273-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000273-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 117</span>
117:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_uninstalls=</span>(<span class="ruby-identifier">list</span>)
118:         <span class="ruby-identifier">build_package_association_assignment</span>(<span class="ruby-identifier">:user_uninstall_items</span>,<span class="ruby-identifier">list</span>)
119:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000274" class="method-detail">
        <a name="M000274"></a>

        <div class="method-heading">

          <a href="#M000274" class="method-signature">

          <span class="method-name">user_uninstalls_package_branch_ids</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000274-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000274-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/magic_mixin/manifest.rb, line 121</span>
121:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_uninstalls_package_branch_ids</span>
122:         <span class="ruby-identifier">user_uninstall_items</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:package_branch</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
123:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>



    </div>




  </div>

<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>
